(window["webpackJsonpbook-manager"]=window["webpackJsonpbook-manager"]||[]).push([[0],{33:function(e,t,a){e.exports=a(60)},38:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(29),l=a.n(o),c=(a(38),a(5)),s=a.n(c),i=a(8),u=a(9),m=a(32),d=a(10),h=a(11),b=a(13),p=a(12),f=a(14),g=a(4),E=a(16),v=a(17),k=a.n(v);a(40),a(43);function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(a,!0).forEach(function(t){Object(i.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var w=function(){var e=Object(u.a)(s.a.mark(function e(t,a){var n,r,o,l;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return n=C.doc("users/".concat(t.uid)),e.next=5,n.get();case 5:if(e.sent.exists){e.next=17;break}return r=t.displayName,o=t.email,l=new Date,e.prev=9,e.next=12,n.set(y({displayName:r,email:o,createdAt:l},a));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(9),console.log("error creating user",e.t0.message);case 17:return e.abrupt("return",n);case 18:case"end":return e.stop()}},e,null,[[9,14]])}));return function(t,a){return e.apply(this,arguments)}}();k.a.initializeApp({apiKey:"AIzaSyB8fbTNh3BXVCAL9hB3bJQxqxOEHNzGf6E",authDomain:"book-manager-9682d.firebaseapp.com",databaseURL:"https://book-manager-9682d.firebaseio.com",projectId:"book-manager-9682d",storageBucket:"",messagingSenderId:"136708509107",appId:"1:136708509107:web:7f8bc5bc1b8b17bc"});var j=k.a.auth(),C=k.a.firestore(),N=new k.a.auth.GoogleAuthProvider;N.setCustomParameters({prompt:"select_account"});var S=function(){return j.signInWithPopup(N)},x=(k.a,a(45),a(20)),P=(a(46),function(e){var t=e.children,a=e.isGoogleSignIn,n=Object(x.a)(e,["children","isGoogleSignIn"]);return r.a.createElement("button",Object.assign({className:"".concat(a?"google-sign-in":""," custom-button")},n),t)}),B=(a(47),function(e){e.addBook;var t=e.currentUser;return r.a.createElement("div",{className:"homepage"},r.a.createElement("h1",{className:"welcome-title"},t?"Welcome ".concat(t.displayName,","):"You need to login or register before!"),t?r.a.createElement("div",null,r.a.createElement("p",{className:"actions"},"What do you want to do?"),r.a.createElement("div",{className:"buttons-container"},r.a.createElement(g.b,{to:"/add-new-book"},r.a.createElement(P,null,"Add a new book")),r.a.createElement(g.b,{to:"/books-list"},r.a.createElement(P,null,"My books list")),r.a.createElement(P,null,"My profile"))):null)}),A=(a(52),a(53),function(e){var t=e.handleChange,a=e.isTextArea,n=e.label,o=Object(x.a)(e,["handleChange","isTextArea","label"]);return r.a.createElement("div",{className:"row"},r.a.createElement("label",null,n),a?r.a.createElement("textarea",{id:"note",cols:"30",rows:"1",onChange:t}):r.a.createElement("input",Object.assign({onChange:t},o)))}),U=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(b.a)(this,Object(p.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(i.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),a.props.addBook(a.state),a.setState({submitted:!0}),setTimeout(function(){a.setState({submitted:!1})},2e3),e.target.reset()},a.state={title:null,author:null,note:null,submitted:!1},a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"form-container"},r.a.createElement("h2",null,"Add a new book"),!0===this.state.submitted?r.a.createElement("div",{className:"success-message"},r.a.createElement("p",null,"Book added to the list!")):null,r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(A,{label:"Title",id:"title",name:"title",type:"title",handleChange:this.handleChange,required:!0}),r.a.createElement(A,{label:"Author",id:"author",name:"author",type:"author",handleChange:this.handleChange,required:!0}),r.a.createElement(A,{label:"Notes about the book",id:"note",name:"note",type:"text",handleChange:this.handleChange,isTextArea:!0}),r.a.createElement("div",{className:"row"},r.a.createElement(P,null,"Add book"))))}}]),t}(n.Component),D=(a(54),a(55),function(e){var t=e.books,a=e.deleteBook,n=t.map(function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("th",null,e.title),r.a.createElement("th",null,e.author),r.a.createElement("th",null,e.note),r.a.createElement("th",null,r.a.createElement("button",{onClick:function(){o(e.id)}},"X")))}),o=function(e){window.confirm("Are you sure?")&&a(e)};return r.a.createElement("div",{className:"list-container"},r.a.createElement("h2",null,"Book List"),r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",{className:"table-title"},r.a.createElement("th",null,"Title"),r.a.createElement("th",null,"Author"),r.a.createElement("th",null,"Note")),n)))}),I=function(e){var t=e.books,a=e.deleteBook,n=e.currentUser;return r.a.createElement("div",{className:"books-library"},n?r.a.createElement(D,{books:t,deleteBook:a}):r.a.createElement("div",{className:"list-container"},r.a.createElement("h2",{style:{textAlign:"center"}},"You need to login or register before!")))},T=(a(56),function(e){var t=e.currentUser;return r.a.createElement("div",{className:"container-nav"},r.a.createElement("h1",{className:"logo"},"Book Manager"),r.a.createElement("ul",{className:"navbar"},r.a.createElement("li",null,r.a.createElement(g.b,{to:"/"},"Home")),r.a.createElement("li",null,r.a.createElement(g.b,{to:"/books-list"},"Book List")),t?r.a.createElement("li",{className:"logout",onClick:function(){j.signOut()}},r.a.createElement(g.b,{to:"/signIn-and-signUp"},"Logout")):r.a.createElement("div",{className:"log-div"},r.a.createElement("li",{className:"login-register"},r.a.createElement(g.b,{to:"/signIn-and-signUp"},"Login / Register")))))}),q=(a(57),a(58),function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(b.a)(this,Object(p.a)(t).call(this))).handleSubmit=function(){var t=Object(u.a)(s.a.mark(function t(a){var n,r,o;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=e.state,r=n.email,o=n.password,t.prev=2,t.next=5,j.signInWithEmailAndPassword(r,o);case 5:e.setState({email:"",password:""}),setTimeout(function(){e.props.history.push("/")},500),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.log(t.t0);case 12:case"end":return t.stop()}},t,null,[[2,9]])}));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(t){var a=t.target,n=a.value,r=a.name;e.setState(Object(i.a)({},r,n))},e.state={email:"",password:""},e}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password;return r.a.createElement("div",{className:"sign-in"},r.a.createElement("h1",null,"Login"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(A,{label:"Email",name:"email",type:"email",value:t,handleChange:this.handleChange,required:!0}),r.a.createElement(A,{label:"Password",name:"password",type:"password",value:a,handleChange:this.handleChange,required:!0}),r.a.createElement(P,{type:"submit"},"Login"),r.a.createElement(P,{onClick:S,isGoogleSignIn:!0},"Sign in with Google")))}}]),t}(n.Component)),L=Object(E.e)(q),R=(a(59),function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(b.a)(this,Object(p.a)(t).call(this))).handleSubmit=function(){var t=Object(u.a)(s.a.mark(function t(a){var n,r,o,l,c,i,u;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n=e.state,r=n.displayName,o=n.email,l=n.password,c=n.confirmPassword,l===c){t.next=5;break}return alert("Password don't match"),t.abrupt("return");case 5:return t.prev=5,t.next=8,j.createUserWithEmailAndPassword(o,l);case 8:return i=t.sent,u=i.user,t.next=12,w(u,{displayName:r});case 12:e.setState({displayName:"",email:"",password:"",confirmPassword:""}),setTimeout(function(){e.props.history.push("/")},500),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(5),console.log(t.t0);case 19:case"end":return t.stop()}},t,null,[[5,16]])}));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(i.a)({},n,r))},e.state={displayName:"",email:"",password:"",confirmPassword:""},e}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.state,t=e.displayName,a=e.email,n=e.password,o=e.confirmPassword;return r.a.createElement("div",{className:"sign-up"},r.a.createElement("h1",null,"Register"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(A,{label:"Username",type:"text",name:"displayName",value:t,handleChange:this.handleChange,required:!0}),r.a.createElement(A,{label:"Email",type:"email",name:"email",value:a,handleChange:this.handleChange,required:!0}),r.a.createElement(A,{label:"Password",type:"password",name:"password",value:n,handleChange:this.handleChange,required:!0}),r.a.createElement(A,{label:"Confirm password",type:"password",name:"confirmPassword",value:o,handleChange:this.handleChange,required:!0}),r.a.createElement(P,{type:"submit"},"Register")))}}]),t}(n.Component)),G=Object(E.e)(R),J=function(){return r.a.createElement("div",{className:"sign-container"},r.a.createElement(L,null),r.a.createElement(G,null))};function M(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function W(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?M(a,!0).forEach(function(t){Object(i.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):M(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var z=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(b.a)(this,Object(p.a)(t).call(this,e))).unsuscribeFromAuth=null,a.deleteBook=function(e){var t=a.state.books.filter(function(t){return t.id!==e});a.setState({books:t})},a.addBook=function(e){e.id=Math.random();var t=[].concat(Object(m.a)(a.state.books),[e]);a.setState({books:t})},a.state={currentUser:null,books:[{title:"Harry Potter",author:"JK Rowling",note:"I love it",id:1},{title:"The lord of the rings",author:"J.R.R Tolkien",note:"The bestseller of the century!",id:2},{title:"Minimalism",author:"Jon Doe",note:"Less is better",id:3}]},a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.unsuscribeFromAuth=j.onAuthStateChanged(function(){var t=Object(u.a)(s.a.mark(function t(a){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=7;break}return t.next=3,w(a);case 3:t.sent.onSnapshot(function(t){e.setState({currentUser:W({id:t.id},t.data())},function(){console.log(e.state)})}),t.next=8;break;case 7:e.setState({currentUser:a});case 8:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())}},{key:"componentWillUnmount",value:function(){this.unsuscribeFromAuth()}},{key:"render",value:function(){var e=this,t=this.state.currentUser;return r.a.createElement(g.a,null,r.a.createElement("div",{className:"container"},r.a.createElement(T,{currentUser:t}),r.a.createElement(E.a,{exact:!0,path:"/",render:function(){return r.a.createElement(B,{addBook:e.addBook,currentUser:t})}}),r.a.createElement(E.a,{path:"/add-new-book",render:function(){return r.a.createElement(U,{addBook:e.addBook})}}),r.a.createElement(E.a,{path:"/books-list",render:function(){return r.a.createElement(I,{books:e.state.books,deleteBook:e.deleteBook,currentUser:t})}}),r.a.createElement(E.a,{path:"/signIn-and-signUp",render:function(){return r.a.createElement(J,null)}})))}}]),t}(n.Component);l.a.render(r.a.createElement(z,null),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.860c2367.chunk.js.map